<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <title>OBS Slideshow</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: transparent;
    }

    #container {
      position: absolute;
      right: 0;
      top: 0;
      width: 35vw;
      height: 100vh;
      overflow: hidden;
    }

    .slide {
      position: absolute;
      width: 100%;
      height: 100%;
      right: -100%;
      transition: right 1s ease-in-out;
      display: flex;
      justify-content: flex-end;
      align-items: flex-start;
    }

    .slide img {
      height: 100%;
      width: auto;
      object-fit: contain;
      object-position: right top;
    }

    .slide.active {
      right: 0;
    }
  </style>
</head>

<body>
  <div id="container"></div>

  <script>

    let index = 0;

    // Pause après le cycle (EN MINUTES)
    const pauseAfterCycleMinutes = 1.5;
    const pauseAfterCycle = pauseAfterCycleMinutes * 60 * 1000;

    // Nouvelle structure JSON (DURÉE EN SECONDES)
    const slidesConfig = [
      { src: "images/1.png", duration: 10 },
      { src: "images/2.png", duration: 10 },
      { src: "images/3.png", duration: 6 },
      { src: "images/4.png", duration: 6 },
      { src: "images/5.png", duration: 6 },
      { src: "images/6.png", duration: 6 },
      { src: "images/7.png", duration: 6 },
      { src: "images/8.png", duration: 6 },
      { src: "images/9.png", duration: 6 }
    ];

    const container = document.getElementById("container");

    // Création des slides
    slidesConfig.forEach((item) => {
      const div = document.createElement("div");
      div.className = "slide";

      const imageElement = document.createElement("img");
      imageElement.src = item.src;

      div.appendChild(imageElement);
      container.appendChild(div);
    });

    const slides = document.querySelectorAll(".slide");

    function nextSlide() {
      if (index > 0) slides[index - 1].classList.remove("active");

      if (index < slides.length) {
        slides[index].classList.add("active");

        // Conversion automatique SECONDES → MILLISECONDES
        const durationMs = slidesConfig[index].duration * 1000;

        index++;
        setTimeout(nextSlide, durationMs);

      } else {
        slides.forEach(slide => slide.classList.remove("active"));
        index = 0;
        setTimeout(nextSlide, pauseAfterCycle);
      }
    }

    nextSlide();
  </script>
</body>

</html>